clear

genDir=pwd;
addpath(genpath(fullfile(genDir,'_FUNC')));
dataDir = fullfile(genDir,'_DATA','behavior');
alldata = getAllFiles(dataDir,'*.mat',1);

subID = strsplit(fileparts(alldata{1}),'/');
subID = subID{end};
catData=[];catSub=[];
for i = 1:length(alldata)
    
   e = load(alldata{i},'emat','response');
   e = flattenStruct2Cell(e);
   e = cell2mat(e);
   
   
   subID = strsplit(fileparts(alldata{i}),'/');
   subID = subID{end};
%    sub{1}=subID;
   sub_a=cellstr(repmat(subID,size(e,1),1));

%     e =[sub_a e];
   catSub  = [catSub; sub_a];
   catData = [catData; e];
   
end
%%

ds = cell2dataset(catData)

ds1 = dataset(e);
emat=[cueing,tarType,tarLoc,ISI];
ds1=num2cell(e)

ds1 = ds1(:,{'cue','numFlash','targetLoc','ISI','response','RT'})

ds1 = ds1(:,{'id','name','sex','age'})


%%
load cereal
cereal = dataset(Calories, Protein,Fat,Sodium,Fiber,Carbo,...
   Sugars,'ObsNames',Name)

tt = dataset(catData(:,1), catData(:,2),catData(:,3),catData(:,4),catData(:,5),catData(:,6),...
   'ObsNames',{'cue','numFlash','targetLoc','ISI','response','RT'})

% 
% Z = textscan(catData,'%s','Delimiter',' ')';
% 
% cell2csv()
% csvwrite('filename.csv',catData)

%
variables = {'sub','cue','numFlash','targetLoc','ISI','response','RT'}
load cities
categories = cellstr(categories);
zz = dataset({catData,variables{:}})


cellstr(string(sub_a)')

% fileparts(alldata{1})
% 
% [filepath,name,ext] = fileparts(alldata{1})
% 
% fileparts(alldata{1})
% s = regexp(fileparts(alldata{1}), '/', 'split')
